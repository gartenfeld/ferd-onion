```bash
$ npm install scrape
```

## Example

Scrape the front page of reddit

```javascript
var scrape = require('scrape');

scrape.request('http://www.reddit.com', function (err, $) {
    if (err) return console.error(err);

    $('div.link').each(function (div) {
        var score = div.find('div.score.unvoted').first()
          , link = div.find('a.title').first();
        console.log('[%s] %s (%s)', score.text, link.text, link.attribs.href);
    });
});
```

To pass options to the request library use `scrape.request(options,
callback)` and pass in a url like this `scrape.request({ url: url }, callback)`.

To setup default options and return a function that can be used later

```javascript
var scrape = scrape(default_options);

scrape([options ,] callback);
```

## Options

All options are passed to the
[curl](https://github.com/chriso/curlrequest) request library which has
built-in support for retries, timeouts, and more - see the [README](https://github.com/chriso/curlrequest) for more information.

## Concurrency

The library also includes a helper method for scraping pages in parallel with control over request concurrency.

To scrape 10 pages max at any one time

```javascript
var scrape = require('scrape');

var urls = [...];

scrape.concurrent(urls, 10, function (url, next) {
    if (url) {
        scrape.request(url, function (err, $) {
            //scrape
            next();
        });
    } else {
        //done
    }
});
```

## License

Copyright (c) 2012 Chris O'Hara <cohara87@gmail.com>

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

